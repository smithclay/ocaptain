#!/usr/bin/expect -f
# Auto-accept Claude TUI dialogs (bypass permissions, settings errors)
set timeout -1
spawn -noecho {*}$argv

# Loop to handle multiple dialogs
# Each dialog has 2 options - we select option 2 and continue
# Use "2" key to directly select option 2, then Enter to confirm
expect {
    "Yes, I accept" {
        sleep 0.3
        send "2"
        sleep 0.2
        send "\r"
        exp_continue
    }
    "Continue without these settings" {
        sleep 0.3
        send "2"
        sleep 0.2
        send "\r"
        exp_continue
    }
    "Begin" {
        # Claude is ready for input
    }
    timeout {
        puts stderr "ERROR: Timed out waiting for Claude dialog"
        exit 1
    }
    eof {
        puts stderr "ERROR: Claude exited unexpectedly"
        exit 1
    }
}
interact
